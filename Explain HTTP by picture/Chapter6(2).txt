Chapter6：HTTP首部

6.3~

HTTP/1.1通用首部字段
通用首部字段是指，请求报文和响应报文双方都会使用的首部
一：Cache-Control
通过指定首部字段Cache-Control的指令，就能操作缓存的工作机制。
指令的参数是可选的，多个指令之间通过“,”分隔。首部字段Cache-Control的指令可用于请求及响应时。
Cache-Control: private, max-age=0, no-cahce
二：Connection
Connection首部字段具备如下两个作用：
1.控制不在转发给代理的首部字段
例: Connection: 不再转发的首部字段名
2.管理持久连接
例: Connection: close 或 Connection: Keep-Alive
三：Date
首部字段Date表明创建HTTP报文的日期和时间
例: Date: Tue, 03 Jul 2012 04:40:59 GMT
四：Pragma
Pragma是HTTP/1.1之前版本的历史遗留字段，仅作为与HTTP/1.0的向后兼容定义，规范定式唯一：
Pragma: no-cache
只用在客户端发送的请求中，客户端会要求所有的中间服务器不返回缓存的资源。
为了兼容，发送的请求一般会同时含有下面两个字段。
Cache-Control: no-cahce
Pragma: no-chche
五：Trailer
首部字段Trailer会事先说明在报文主体后记录了哪些首部字段，主要用在HTTP/1.1分块传输编码时。
六：Transfer-Encoding
首部字段Transfer-Encoding规定了传输报文主体时采用的编码方式。
HTTP/1.1的传输编码方式仅对分块传输编码有效。
七：Upgrade
首部字段Upgrade用于检测HTTP协议及其他协议是否可使用更高的版本进行通信，其参数值可以用来指定一个完全不同的通信协议。
八：Via
使用首部字段Via是为了追踪客户端与服务器之间的请求和响应报文的传输路径。
报文经过代理或网关时，会先在首部字段Via中附加该服务器的信息，然后再近些转发。
首部字段Via不仅用于追踪报文的转发，还可以避免请求回环的发生，所以必须在经过代理时附加该首部字段内容。
Via首部是为了追踪传输路径，所以经常会和TRACE方法一起使用。
九：Warning
HTTP/1.1的Warning首部是从HTTP/1.0的响应首部（Retry-After），该首部通常会告知用户一些与缓存相关的问题的警告。
Warning首部的格式如下，最后的日期时间部分可省略：
Warning: [警告码][警告的主机:端口号] "[警告内容]" ([日期时间])
HTTP/1.1中定义了7种警告：
警告码                 警告内容                                说明
110                   Response is state（响应已过期）          代理返回已过期的资源
111                   Revalidation failed（再验证失败）        代理再验证资源有效性时失败（服务器无法到达等原因）
112                   Disconnection operation（断开连接操作）   代理与互联网连接被故意切断
113                   Heuristic expiration（试探性过期）       响应的使用期超过24小时（有效缓存的设定时间大于24小时的情况下）
199                   Miscellancous warning（杂项警告）        任意的警告内容
214                   Transformation applied（使用了转换）     代理对内容编码或媒体类型等执行了某些处理时
299                   Miscellaneous persistent warning（持久杂项警告）  任意的警告内容

请求首部字段
请求首部字段是从客户端往服务器端发送请求报文中所使用的字段，用于补充请求的附加信息、客户端信息、对响应内容相关的优先级等内容。
一：Accept（重点）
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept首部字段可通知服务器，用户代理能够处理的媒体类型及媒体类型的相对优先级，可使用type/subtype这种形式，一次指定多种媒体类型。
下面列举几个媒体类型的例子：
1.文本文件
text/html,text/plain,text/css,application/xhtml+xml,application/xml
2.图片文件
image/jpeg,image/gif,image/png
3.视频文件
video/mpeg,video/quicktime
4.应用程序使用的二进制文件
application/octet-stream,application/zip
比如，如果浏览器不支持PNG图片的显示，那么Accept就不指定image/png,而指定可处理的image/gif和image/jepg等图片类型。
若想给显示的媒体类型增加优先级，则使用q=来额外表示权重值，用分号进行分隔。权重值q的范围是0~1，且1为最大值，不指定去值时，默认权重为q=1.0
当服务器提供多种内容时，将会首先返回权重值最高的媒体类型。
二：Accept-Charset
Accept-Charset: iso-8859-5, unicode-1-1; q=0.8
Accept-Charset首部字段可用来通知服务器用户dialing支持的字符集以及字符集的相对优先顺序，另外，可一次性指定多种字符集。
与Accept相同的是可用权重q值来表示相对优先级。
该首部字段应用于内容协商机制的服务器驱动协商。
三：Accept-Encoding
Accept-Encoding: gzip, deflate
Accept-Encoding首部字段用来告知服务器用户代理支持的内容编码及内容编码的优先级顺序，可一次性指定多种内容编码。
四：Accept-Language
Accept-Language: zh-cn,zh;q=0.7,en-us,en;q=0.3;
首部字段Accept-Language用来告知服务器用户代理能够处理的自然语言集（指中文或英文等），以及自然语言集的相对优先级。可一次指定多种自然语言集。
权重表示方法依然是用q值。
五：Authorization
首部字段Authorization是用来告知服务器，用户代理的认证信息（证书值）。
通常，想要通过服务器认证的用户代理会在接收到返回的401状态码后，把首部字段Authorization加入请求中，
六：Expect
Expect: 100-continue
客户端使用首部字段Expect来告知服务器，期望出现的某种特定行为。
因服务器无法理解客户端的期望作出回应并发送错误时，会返回状态码417 Expectation failed 。
客户端可以利用该首部字段，写明所期望出现的扩展。



